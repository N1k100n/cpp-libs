<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Detailed documentation of C++ libraries with examples and explanations. Learn more about best practices and the variety of libraries for C++."/>
  <meta name="keywords" content="C++, C++ libraries, documentation, reference, programming, examples"/>
  <meta name="author" content="n1k100n"/>
  <title>Lib</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<div>
    <main>
        <h1>Any library (C++17)</h1>
        <hr>
        <p>The &lt;any&gt; library was introduced in C++17 to provide a type-safe way to store and manipulate objects of
            different types without resorting to void pointers or type erasure techniques. It allows you to hold a
            value of any type and later retrieve it, provided you know the type.</p>

        <h2>Key benefits of using std::any</h2>
        <ul>
            <li><b>Type safety:</b> <code>std::any</code> ensures type safety by performing type checks at runtime. You
                cannot access the stored value with the wrong type.</li>
            <li><b>Flexibility:</b> <code>std::any</code> can hold values of any type, making it useful for situations
                where you need to work with objects of unknown or varying types.</li>
            <li><b>Simplified code:</b> <code>std::any</code> can simplify code by eliminating the need for complex type
                hierarchies or variant types in certain scenarios.</li>
        </ul>

        <h3>How to use std::any</h3>
        <p>To use <code>std::any</code>, you need to include the &lt;any&gt; header file. You can then create an
            <code>std::any</code> object and store a value in it using the assignment operator or the
            <code>emplace</code> method.</p>

        <h3>Example: Storing and retrieving values</h3>
        <pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;any&gt;
#include &lt;string&gt;

int main() {
    std::any a = 42; // Store an integer
    std::cout &lt;&lt; std::any_cast&lt;int&gt;(a) &lt;&lt; std::endl; // Retrieve the integer

    a = std::string("Hello"); // Store a string
    std::cout &lt;&lt; std::any_cast&lt;std::string&gt;(a) &lt;&lt; std::endl; // Retrieve the string

    if (a.type() == typeid(std::string)) {
        std::string s = std::any_cast&lt;std::string&gt;(a);
        std::cout &lt;&lt; s &lt;&lt; std::endl;
    }

    return 0;
}
</code></pre>

        <h3>Checking the type and existence of a value</h3>
        <p>You can use the <code>type()</code> method to check the type of the stored value and the
            <code>has_value()</code> method to check if the <code>std::any</code> object contains a value.</p>
        <pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;any&gt;

int main() {
    std::any a;
    if (a.has_value()) {
        std::cout &lt;&lt; "a has a value" &lt;&lt; std::endl;
    } else {
        std::cout &lt;&lt; "a does not have a value" &lt;&lt; std::endl;
    }

    a = 123;
    if (a.type() == typeid(int)) {
        std::cout &lt;&lt; "a holds an integer" &lt;&lt; std::endl;
    }

    return 0;
}
</code></pre>

        <h3>When to use std::any</h3>
        <p><code>std::any</code> is useful in situations where you need to work with objects of different types, but
            you don't know the exact types at compile time. This can happen, for example, when working with user input,
            data from a database, or when implementing a generic function that can handle different types.</p>

        <p>However, it's important to keep in mind that using <code>std::any</code> can have performance implications due to
            the runtime type checking and potential memory allocation. Therefore, it's recommended to use it only
            when necessary and to consider alternative solutions, such as variant types or templates, if they are more
            appropriate for your use case.</p>
    </main>
</div>
</body>
</html>